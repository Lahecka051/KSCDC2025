GPS 명령 사용법

# GPS 좌표로 이동 (현재 고도 유지)
drone.cmd = ["gps", 35.123456, 129.123456]

# GPS 좌표로 이동 (고도 지정)
drone.cmd = ["gps", 35.123456, 129.123456, 10.0]

명령 형식

일반 제어: [vertical, horizontal, rotation, motor_percent]
GPS 이동: ["gps", latitude, longitude] 또는 ["gps", latitude, longitude, altitude]

사용 예제
1. 간단한 GPS 이동
pythondrone = Drone()
await drone.initialize()
await drone.arm_and_takeoff(5.0)

# GPS 좌표로 이동
drone.cmd = ["gps", 35.123456, 129.123456]
await asyncio.sleep(15)

# 다른 좌표로 이동 (15m 고도)
drone.cmd = ["gps", 35.123556, 129.123556, 15.0]
await asyncio.sleep(15)

await drone.land_and_disarm()
2. Thinker 모듈 통합
python# Thinker에서 계산된 경로 받기
thinker_waypoints = [
    [35.123456, 129.123456],
    [35.123556, 129.123556],
    [35.123656, 129.123656]
]

# 각 웨이포인트로 이동
for waypoint in thinker_waypoints:
    drone.cmd = ["gps", waypoint[0], waypoint[1]]
    await asyncio.sleep(15)
3. GPS 자율비행 미션
pythonclass GPSMission:
    def __init__(self):
        self.drone = Drone()
        self.waypoints = []
    
    async def execute(self):
        await self.drone.initialize()
        await self.drone.arm_and_takeoff(5.0)
        
        # 미션 포인트
        mission = [
            [35.123456, 129.123456, 10.0],
            [35.123556, 129.123456, 15.0],
            [35.123556, 129.123556, 10.0],
            [35.123456, 129.123556, 10.0]
        ]
        
        for point in mission:
            self.drone.cmd = ["gps", point[0], point[1], point[2]]
            await asyncio.sleep(20)
        
        await self.drone.land_and_disarm()
4. 일반 제어와 GPS 혼합
python# 일반 제어와 GPS를 섞어서 사용
commands = [
    ["level", "forward", 0, 50],  # 일반: 전진
    ["gps", 35.123456, 129.123456],  # GPS 이동
    ["up", "hover", 90, 0],  # 일반: 회전
    ["gps", 35.123556, 129.123556, 20.0],  # GPS 이동
]

for cmd in commands:
    drone.cmd = cmd
    await asyncio.sleep(10)
5. 순찰 미션
python# 사각형 순찰
patrol_points = [
    [35.123456, 129.123456, 10.0],
    [35.123556, 129.123456, 10.0],
    [35.123556, 129.123556, 10.0],
    [35.123456, 129.123556, 10.0]
]

# 3회 반복 순찰
for i in range(3):
    print(f"순찰 {i+1}/3")
    for point in patrol_points:
        drone.cmd = ["gps"] + point
        await asyncio.sleep(15)
🔄 Thinker 통합 예제
python# Thinker GPS 모듈과 연동
def thinker_gps_callback(gps_data):
    """Thinker에서 GPS 경로를 받는 콜백"""
    
    # Thinker 형식 변환
    if gps_data['type'] == 'waypoint':
        lat = gps_data['latitude']
        lon = gps_data['longitude']
        alt = gps_data.get('altitude', None)
        
        if alt:
            drone.cmd = ["gps", lat, lon, alt]
        else:
            drone.cmd = ["gps", lat, lon]
    
    elif gps_data['type'] == 'path':
        # 경로 리스트
        for point in gps_data['points']:
            drone.cmd = ["gps", point['lat'], point['lon']]
            time.sleep(15)
